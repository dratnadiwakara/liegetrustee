{% extends "trusteeapp/base_trustee.html" %}

{% block title %}
Create Holdings
{% endblock title %}

{% load crispy_forms_tags %} 
{% load humanize %}
{% block content %}
                <h3>Create Holdings</h3>
                {{client.client_name}}
                <b>Ability to upload holdings</b>
                <form method="POST" > {% csrf_token %}
                    {{form|crispy}}
                    <button type="submit",name="save" class="btn btn-success">Create Borrower</button>
                </form>

                {% if equitypf %}
                <table class="table table-striped table-bordered dataTable showtable" style="width: 100%;" >
                    <thead><tr><th>Security</th><th>Quantity</th><th>Cost</th><th>Current Price</th><th>Market Value</th><th>Gain/Loss</th><th>Margin Pct</th><th>Margin Value</th><th>Broker</th></tr></thead>
                    <tbody>
                        {% for sec in equitypf %}<tr><td>{{sec.stock.ticker}}</td><td align="right">{{sec.quantity|floatformat:0|intcomma}}</td><td align="right">{{sec.cost_basis|floatformat:2|intcomma}}</td><td align="right">{{sec.stock.current_price|floatformat:2|intcomma}}</td><td align="right">{{sec.marketvalue|floatformat:2|intcomma}}</td><td align="right">{{sec.gainloss|floatformat:2|intcomma}}</td><td align="right">{{sec.stock.margin_pct|floatformat:2|intcomma}}</td><td align="right">{{sec.marginvalue|floatformat:2|intcomma}}</td><td>{{sec.broker.broker_code}}</td></tr>{% endfor %}
                    </tbody>
                </table>
                {% endif %}
{% endblock content %}

<!-- Table showing the list of current holdings -->
<!-- Client is already set in previous view. Not able to change client here. Should be passed from context-->